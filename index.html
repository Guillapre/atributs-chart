<!DOCTYPE html>
<html>
<head>
<title>dnd-attr-chart</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <div id="attr-plot" style="width:700px;height:500px;"></div>
  <div id="skill-plot" style="width:700px;height:500px;"></div>
</body>
<script>
const urlParams = new URLSearchParams(window.location.search);

Math.max(...urlParams.values())

attr_data = [{
  type: 'scatterpolar',
  r: [urlParams.get('str'), urlParams.get('dex'), urlParams.get('con'), urlParams.get('int'), urlParams.get('wis'), urlParams.get('cha'),urlParams.get('str')],
  theta: ["STR", "DEX", "CON", "INT", "WIS", "CHA", "STR"],
  fill: 'toself'
}]
attr_layout = {
  polar: {
    radialaxis: {
      tickmode: "array",
      tickvals: ["0","2","4","6","8","10","12","14","16","18","20","22","24","26","28","30"],
      ticktext: ["-5","-4","-3","-2","-1","0","+1","+2","+3","+4","+5","+6","+7","+8","+9","+10"],
      visible: true,
      range: [-1, ((Math.max(...urlParams.values()) < 20) ? 20 : Math.max(...urlParams.values()))]
    }
  },
  showlegend: false
}

urlParams.delete("str");urlParams.delete("dex");urlParams.delete("con");urlParams.delete("int");urlParams.delete("wis");urlParams.delete("cha");

skill_data = [{
  type: 'scatterpolar',
  r: [urlParams.get('athletics'),urlParams.get('acrobatics'),urlParams.get('sleight_of_hand'),urlParams.get('stealth'),urlParams.get('arcana'),urlParams.get('history'),urlParams.get('investigation'),urlParams.get('nature'),urlParams.get('religion'),urlParams.get('animal_handling'),urlParams.get('insight'),urlParams.get('medicine'),urlParams.get('perception'),urlParams.get('survival'),urlParams.get('deception'),urlParams.get('intimidation'),urlParams.get('performance'),urlParams.get('persuasion'),urlParams.get('athletics')],
  theta: ["Athletics", "Acrobatics", "Sleight of Hand", "Stealth", "Arcana", "History", "Investigation", "Nature", "Religion", "Animal Handling", "Insight", "Medicine", "Perception", "Survival", "Deception", "Intimidation", "Performance", "Persuasion","Athletics"],
  fill: 'toself'
}]
skill_layout = {
  polar: {
    radialaxis: {
      visible: true,
      range: [-6, ((Math.max(...urlParams.values()) < 10) ? 10 : Math.max(...urlParams.values()))]
    }
  },
  showlegend: false
}


Plotly.newPlot("attr-plot", attr_data, attr_layout)
Plotly.newPlot("skill-plot", skill_data, skill_layout)
</script>
</html>